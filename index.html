<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live stream</title>

<style>
  body {
    background:#111;
    color:#fff;
    font-family: Arial, sans-serif;
    text-align:center;
    padding:40px;
  }
  button {
    font-size:24px;
    padding:20px 40px;
    background:#ff5500;
    border:none;
    border-radius:10px;
    color:white;
    cursor:pointer;
  }
  audio {
    margin-top:20px;
    width:100%;
    max-width:420px;
  }
  #status {
    margin-top:20px;
    font-size:18px;
  }
</style>
</head>

<body>

<h1>Live luisteren</h1>

<button id="playBtn">Play</button>

<audio id="player" controls preload="none">
  <source src="http://uk22freenew.listen2myradio.com:31173/;stream.mp3" type="audio/mpeg">
  Je browser ondersteunt geen audio.
</audio>

<div id="status">Status: Niet gestart</div>

<script>
const btn = document.getElementById("playBtn");
const audio = document.getElementById("player");
const status = document.getElementById("status");

audio.pause(); // expliciet pauzeren bij laden

btn.addEventListener("click", () => {
  audio.load();
  audio.play().then(() => {
    status.textContent = "Status: Stream speelt";
  }).catch(() => {
    status.textContent = "Status: Klik nogmaals op Play als het niet start";
  });
  btn.style.display = "none";
});

// automatische reconnect bij stoppen of fout
audio.addEventListener("stalled", reconnect);
audio.addEventListener("ended", reconnect);
audio.addEventListener("error", reconnect);

// update status bij pauze
audio.addEventListener("pause", () => {
  status.textContent = "Status: Gestopt of onderbroken";
});

function reconnect() {
  status.textContent = "Status: Verbinding opnieuw proberen...";
  setTimeout(() => {
    audio.load();
    audio.play().then(() => {
      status.textContent = "Status: Stream speelt";
    }).catch(() => {
      status.textContent = "Status: Klik nogmaals op Play als het niet start";
    });
  }, 1500);
}
</script>

</body>
</html>
